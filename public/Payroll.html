<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="styles/style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>EMS</title>
</head>

<body>
    <nav class="container-nav box-shadow">
        <div class="container-nav-title">
            <img src="img/bfar-logo.png" alt="">
            <h1>BFAR <span>EMS</span></h1>
        </div>
    </nav>
    <div class="container">
        <aside class="container-aside">
            <div class="container-aside-list">
                <label for="employee">Dashboard</label>
                <div class="container-aside-list-dropdown  ">
                    <a href="/admin/">
                        <i class="fa-solid fa-chart-bar"></i>
                        <label for="">Dashboard</label>
                    </a>
                </div>
            </div>
            <div class="container-aside-list">
                <label for="employee">Employee Management</label>
                <div class="container-aside-list-dropdown  ">
                    <a href="/admin/employees">
                        <i class="fa-solid fa-user"></i>
                        <label for="">Employees</label>
                    </a>
                </div>
            </div>
            <div class="container-aside-list">
                <label for="employee">Payroll Management</label>
                <div class="container-aside-list-dropdown ">
                    <a href="/admin/payroll">
                        <i class="fa-solid fa-receipt"></i>
                        <label for="">Payment</label>
                    </a>
                </div>
            </div>
            <div class="container-aside-list">
                <label for="payroll">Attendance Management</label>
                <div class="container-aside-list-dropdown">
                    <a href="/admin/records">
                        <i class="fa-solid fa-calendar-check"></i>
                        <label for="">Records</label>
                    </a>
                </div>
            </div>
            <div class="container-aside-list">
                <label for="payroll">Settings</label>
                <div class="container-aside-list-dropdown">
                    <a href="#">
                        <i class="fa-solid fa-sliders"></i>
                        <label for="">Accounts</label>
                    </a>
                </div>
            </div>
        </aside>
        <main>
            <div class="container dashboard">
                <div class="employees">
                    <div class="employee-query components box-shadow">
                        <h1>Payroll Accounts</h1>
                        <div class="employee-query-search">
                            <form novalidate role="search">
                                <button>
                                    <i class="fa-solid fa-magnifying-glass"></i>
                                </button>
                                <input type="text" placeholder="Type your query here and press enter">
                            </form>
                        </div>
                    </div>
                    <div class="employee-container components box-shadow">
                        <table class="employee-table">
                            <tr>
                                <th>Employee Code</th>
                                <th>Name</th>
                                <th>Designation</th>
                                <th>Monthly Rate</th>
                                <th>Days</th>
                                <th>Gross Amount Earned</th>
                                <th>Absentee(s)</th>
                                <th>Undertime</th>
                                <th>Net Amount Due</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                            <tr>
                                <td>01</td>
                                <td>Programmer</td>
                                <td>15000.00</td>
                                <td>11</td>
                                <td>15000.00</td>
                                <td>2</td>
                                <td>32</td>
                                <td>15000.00</td>
                                <td>asdasd</td>
                                <td>Status</td>
                                <td><button class="button table-btn" id="view-details">view details</button></td>
                            </tr>
                            <tr class="sub-detail" id="sub-detail" >
                                <td colspan="11" class="payroll-details">
                                    <div class="container">
                                        <div class="header">
                                            <div class="left">
                                                <i class="fa-solid fa-circle-info"></i> <label for="details"> Payroll Details</label>
                                            </div>
                                            <div class="right">
                                               <a href="#"><i class="fa-solid fa-download"></i></a>
                                            </div>
                                        </div>
                                        <div class="main">
                                            <div class="header">
                                                <div>
                                                    <label for="head-id">Employee ID</label>
                                                    <label for="id">1011</label>
                                                </div>
                                                <div>
                                                    <label for="head-name">Employee Name</label>
                                                    <label for="name">Ken Gervacio</label>
                                                </div>
                                                <div>
                                                    <label for="head-designation">Designation</label>
                                                    <label for="designation">Programmer</label>
                                                </div>
                                            </div>
                                            <div class="tables">
                                                <div class="table">
                                                    <table>
                                                        <tr>
                                                            <th>Gross Pay</th>
                                                            <th></th>
                                                            <th>Amount</th>
                                                        </tr>
                                                        <tr class="details">
                                                            <td>Monthly Salary</td>
                                                            <td></td>
                                                            <td>P   15000.00</td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td>Calendar Days</td>
                                                            <td>11 days</td>
                                                            <td>P7500.00</td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td>Total Days</td>
                                                            <td>11 days</td>
                                                            <td></td>
                                                        </tr>
                                                        <tr class="details sub-detail sub">
                                                            <td>Holidays</td>
                                                            <td>- 0 days</td>
                                                            <td></td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td>No. of Days</td>
                                                            <td>8 days</td>
                                                            <td></td>
                                                        </tr>
                                                        <tr class="details sub-detail sub">
                                                            <td>Absents</td>
                                                            <td>0 days</td>
                                                            <td>- P0.00</td>
                                                        </tr>
                                                        
                                                        <tr class="details sub-detail sub">
                                                            <td>Undertime</td>
                                                            <td>32 mins</td>
                                                            <td>- P45.44</td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td></td>
                                                            <td class="total">Total Gross Pay</td>
                                                            <td>P7454.56</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                                <div class="table">
                                                    <table>
                                                        <tr>
                                                            <th>Net Pay</th>
                                                            <th></th>
                                                            <th>Amount</th>
                                                        </tr>
                                                        <tr class="details">
                                                            <td>Gross Salary</td>
                                                            <td></td>
                                                            <td>P   7454.56</td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td>Tax</td>
                                                            <td></td>   
                                                            <td></td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td></td>
                                                            <td>2%</td>
                                                            <td>- P0.00</td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td></td>
                                                            <td>5%</td>
                                                            <td>- P0.00</td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td></td>
                                                            <td>10%</td>
                                                            <td>- P0.00</td>
                                                        </tr>
                                                        <tr class="details sub-detail">
                                                            <td></td>
                                                            <td class="total">Total Net Pay</td>
                                                            <td>P7454.56</td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                            
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <form novalidate role="search">
                        <label for="birthday">From:</label>
                        <input type="date" id="fromdate" name="fromdate">
                        <label for="birthday">To:</label>
                        <input type="date" id="todate" name="todate">
                    </form>
                    <button class="button-submit find">Find</button>
                    <script>

                        //  FORMAT DATE TO MM/DD/YYYY
                        const splitDate = (date) => {
                            const splitDate = date.split('-')
                            const month = splitDate[2]
                            const day = splitDate[1]
                            const year = splitDate[0]
                            const newDate = `${month}/${day}/${year}`
                            return newDate
                        }
                        //  GET CALENDER ELEMENTS
                        const inputFromDate = document.querySelector('#fromdate')
                        const inputToDate = document.querySelector('#todate')

                        // SET DEFAULT DATE TODAY
                        inputFromDate.valueAsDate = new Date()
                        inputToDate.valueAsDate = new Date()

                        // GET ELEMENT OF FIND BUTTON, INITIATE WHEN CLICKED
                        const btnSubmit = document.querySelector('.find')
                        btnSubmit.addEventListener('click', async (e) => {
                            // fromDate = inputFromDate.value
                            // toDate = inputToDate.value
                            fromDate = '2022-07-15'
                            toDate = '2022-07-30'
                            location.href = `/admin/payroll?from=${fromDate}&to=${toDate}`
                            // console.log(fromDate, toDate)
                            // console.log(fromDate)
                            // console.log(toDate)
                            // const res = await fetch(`/admin/payroll_get?from=${fromDate}&to=${toDate}`, {
                            //     headers: {'Content-Type': 'application/json'},
                            //     method:'get'
                            // })
                            // const data = await res.json()
                            // console.log(data)

                        })
                        const btnViewDetails = document.querySelector('#view-details')
                        const subDetailRow = document.querySelector('#sub-detail')
                        btnViewDetails.addEventListener('click', (e)=>{
                            console.log('details clicked')
                            if(subDetailRow.style.display === 'none'){
                                subDetailRow.style.display = "";
                            }else{
                                subDetailRow.style.display = "none";
                            }
                        })

                    </script>
                </div>
            </div>
        </main>
    </div>

</body>

</html>