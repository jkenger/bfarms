<%-include('partials/Header')%>
    <%-include('partials/Nav') %>
        <%-include('partials/Aside')%>

            <main>
                <div class="container dashboard">
                    <div class="employees">
                        <div class="employee-query components box-shadow">
                            <h1>Employee</h1>
                            <div class="employee-query-search">
                                <form novalidate role="search">
                                    <button>
                                        <i class="fa-solid fa-magnifying-glass"></i>
                                    </button>
                                    <input type="text" placeholder="Type your query here and press enter">
                                </form>
                            </div>
                        </div>
                        <a href="/admin/employees/add" class="edit">ADD Employee</a>
                        <div class="employee-container components box-shadow">
                            
                            <table class="employee-table">
                                <tr>
                                    <th>ID</th>
                                    <th>Employee Code</th>
                                    <th>Name</th>
                                    <th>Age</th>
                                    <th>Email</th>
                                    <th>Contact</th>
                                    <th>Position</th>
                                    <th>Actions</th>
                                </tr>
                                <% Object.values(datas.result).forEach(user => { %> 
                                    <tr>
                                        <td><%=user._id%></td>
                                        <td><%=user.emp_code%></td>
                                        <td><%=user.name%></td>
                                        <td><%=user.age%></td>
                                        <td><%=user.email%></td>
                                        <td><%=user.contact%></td>
                                        <td><%=user.position%></td>
                                        <td>
                                            <button class="button" data-id='<%=user._id%>'>view details</button>
                                        </td>
                                    </tr>
                                <%}); %>
                            </table>
                            <script>
                                const viewBtns = document.querySelectorAll('.button')
                                const editBtn = document.querySelector('.button-edit')
                                // const id = viewBtn.dataset.id
                                for(let i = 0; i < viewBtns.length; i++){
                                    viewBtns[i].addEventListener('click', (e)=>{
                                        const id = viewBtns[i].dataset.id
                                        location.assign(`http://localhost:3000/admin/employees/view/${id}`)
                                    })
                                }
                               
                                // viewBtn.addEventListener('click', (e)=>{
                                //     location.assign(`http://localhost:3000/admin/employees/view/${id}`)
                                // })

                            </script>
                        </div>
                    </div>
                </div>
            </main>
            <%-include('partials/Footer')%>